{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sylwia\\\\Desktop\\\\SpaceDuck\\\\StudioProjektowe\\\\spaceduck\\\\src\\\\Views\\\\RegisterView.jsx\";\nimport React from 'react';\nimport Header from '../components/Header.jsx';\nimport { Redirect } from 'react-router-dom';\nimport './forms-style.css';\nimport nyanDuck from '../assets/Nyan_kaczka.png';\nimport address from '../configuration.json';\n\nclass Register extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      name: '',\n      mail: '',\n      password: '',\n      repeatedPassword: '',\n      correctPassword: false,\n      correctRepeatedPassword: false,\n      correctEmail: false,\n      correctData: false,\n      registered: false\n    };\n    this.handleName = this.handleName.bind(this);\n    this.handleEmail = this.handleEmail.bind(this);\n    this.handlePassword = this.handlePassword.bind(this);\n    this.handleRepeatedPassword = this.handleRepeatedPassword.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleEmail(event) {\n    this.setState({\n      mail: event.target.value\n    });\n  }\n\n  handleName(event) {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  handlePassword(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  handleRepeatedPassword(event) {\n    this.setState({\n      repeatedPassword: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    fetch('https://' + address.backendURL + address.register, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"Name\": this.state.name,\n        \"Email\": this.state.mail,\n        \"Password\": this.state.password\n      })\n    }).then(response => response.json()).then(responseJson => {\n      if (responseJson == \"This user can not be created!\") {\n        //information about taken login/email\n        var error = document.createElement('p');\n        error.style = \"color: #D62222; background: rgba(255,0,0,0.1); display:inline-block; padding:10px; width:80%; border: solid 1px #D62222;\";\n        error.innerHTML = \"Login lub email jest już zajęty!\";\n        var errorDiv = document.getElementsByClassName('errorContainer')[0];\n        if (errorDiv.childElementCount != 0) errorDiv.removeChild(errorDiv.lastElementChild);\n        errorDiv.style = \"visibility:visible;\";\n        errorDiv.append(error);\n      } else {\n        //registered succesfully -> redirect for login view\n        this.setState({\n          registered: true\n        });\n      }\n    }).catch(error => {\n      var error = document.createElement('p');\n      error.style = \"color: #D62222; background: rgba(255,0,0,0.1); display:inline-block; padding:10px; width:80%; border: solid 1px #D62222;\";\n      error.innerHTML = \"Nie można połączyć się z serwerem, spróbuj poźniej!\";\n      var errorDiv = document.getElementsByClassName('errorContainer')[0];\n      if (errorDiv.childElementCount != 0) errorDiv.removeChild(errorDiv.lastElementChild);\n      errorDiv.style = \"visibility:visible;\";\n      errorDiv.append(error);\n    });\n  }\n\n  emailValidation(email) {\n    var re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  }\n\n  strongPassword(password) {\n    var re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})/;\n    return re.test(password);\n  }\n\n  render() {\n    //password validation\n    let inputStyle = {};\n\n    if (this.state.password !== this.state.repeatedPassword) {\n      inputStyle = {\n        'border': 'solid red 1px',\n        'background': 'rgba(255,0,0,0.3)'\n      };\n      this.state.correctRepeatedPassword = false;\n    } else {\n      inputStyle = {};\n      this.state.correctRepeatedPassword = true;\n    }\n\n    let passwordStyle = {}; //strong password validation\n\n    if (!this.strongPassword(this.state.password)) {\n      passwordStyle = {\n        'border': 'solid red 1px',\n        'background': 'rgba(255,0,0,0.3)'\n      };\n      this.state.correctPassword = false;\n    } else {\n      passwordStyle = {};\n      this.state.correctPassword = true;\n    } //email validation\n\n\n    let emailStyle = {};\n\n    if (!this.emailValidation(this.state.mail)) {\n      emailStyle = {\n        'border': 'solid red 1px',\n        'background': 'rgba(255,0,0,0.3)'\n      };\n      this.state.correctEmail = false;\n    } else {\n      emailStyle = {};\n      this.state.correctEmail = true;\n    } //checking if all datas are correct\n\n\n    if (this.state.correctEmail && this.state.correctPassword && this.state.correctRepeatedPassword && this.state.name != '') {\n      this.state.correctData = true;\n    } else {\n      this.state.correctData = false;\n    } //redirecting to login View\n\n\n    if (this.state.registered === true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 18\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"form-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, \"Rejestracja\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: nyanDuck,\n      alt: \"nyan kaczka\",\n      className: \"nyan\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"errorContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: this.handleName,\n      placeholder: \"login\",\n      defaultValue: this.state.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 148\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      style: emailStyle,\n      type: \"text\",\n      onChange: this.handleEmail,\n      placeholder: \"email\",\n      defaultValue: this.state.mail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 145\n      }\n    }), !this.state.correctPassword ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"incorrectPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 56\n      }\n    }, \"U\\u017Cyj silnego has\\u0142a. Silne has\\u0142o zawiera minimum jedn\\u0105 du\\u017C\\u0105 i ma\\u0142\\u0105 liter\\u0119, cyfr\\u0119 oraz znak specialny. Minimalna d\\u0142ugo\\u015B\\u0107 has\\u0142a to 8 znak\\xF3w.\") : null, /*#__PURE__*/React.createElement(\"input\", {\n      style: passwordStyle,\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.handlePassword,\n      placeholder: \"has\\u0142o\",\n      defaultValue: this.state.password,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 185\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      style: inputStyle,\n      type: \"password\",\n      onChange: this.handleRepeatedPassword,\n      placeholder: \"powt\\xF3rz has\\u0142o\",\n      defaultValue: this.state.repeatedPassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 179\n      }\n    }), this.state.correctData ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Zarejestruj\",\n      onClick: this.handleSubmit,\n      enabled: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 52\n      }\n    }) : /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Zarejestruj\",\n      disabled: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 142\n      }\n    }))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["C:/Users/Sylwia/Desktop/SpaceDuck/StudioProjektowe/spaceduck/src/Views/RegisterView.jsx"],"names":["React","Header","Redirect","nyanDuck","address","Register","Component","constructor","state","name","mail","password","repeatedPassword","correctPassword","correctRepeatedPassword","correctEmail","correctData","registered","handleName","bind","handleEmail","handlePassword","handleRepeatedPassword","handleSubmit","event","setState","target","value","fetch","backendURL","register","method","headers","body","JSON","stringify","then","response","json","responseJson","error","document","createElement","style","innerHTML","errorDiv","getElementsByClassName","childElementCount","removeChild","lastElementChild","append","catch","emailValidation","email","re","test","strongPassword","render","inputStyle","passwordStyle","emailStyle"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Header from '../components/Header.jsx'\r\nimport { Redirect } from 'react-router-dom'\r\nimport './forms-style.css'\r\nimport nyanDuck from '../assets/Nyan_kaczka.png'\r\nimport address from '../configuration.json';\r\nclass Register extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            name:'',\r\n            mail: '',\r\n            password:'',\r\n            repeatedPassword:'',\r\n            correctPassword:false,\r\n            correctRepeatedPassword:false,\r\n            correctEmail:false,\r\n            correctData:false,\r\n            registered:false\r\n          \r\n        };\r\n        this.handleName = this.handleName.bind(this);\r\n        this.handleEmail = this.handleEmail.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        this.handleRepeatedPassword = this.handleRepeatedPassword.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n           \r\n    }\r\n    handleEmail(event) {\r\n        this.setState({mail: event.target.value});\r\n    }\r\n    handleName(event) {\r\n        this.setState({name: event.target.value}); \r\n    }\r\n    handlePassword(event) {\r\n        this.setState({password: event.target.value}); \r\n    }\r\n    handleRepeatedPassword(event) {\r\n        this.setState({repeatedPassword: event.target.value});   \r\n    }\r\n\r\n    handleSubmit(event) {\r\n    \r\n        fetch('https://'+address.backendURL+address.register, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Content-Type': 'application/json' \r\n                    },\r\n                    body: JSON.stringify({\r\n                        \"Name\": this.state.name,\r\n                        \"Email\": this.state.mail,\r\n                        \"Password\": this.state.password\r\n                    }),\r\n                })\r\n            .then((response) => response.json())\r\n            .then((responseJson) => {\r\n                if(responseJson==\"This user can not be created!\"){\r\n                //information about taken login/email\r\n                 var error = document.createElement('p');\r\n                 error.style=\"color: #D62222; background: rgba(255,0,0,0.1); display:inline-block; padding:10px; width:80%; border: solid 1px #D62222;\";\r\n                 error.innerHTML=\"Login lub email jest już zajęty!\";\r\n                 var errorDiv = document.getElementsByClassName('errorContainer')[0];\r\n                 if(errorDiv.childElementCount!=0)\r\n                    errorDiv.removeChild(errorDiv.lastElementChild);\r\n                 errorDiv.style=\"visibility:visible;\";\r\n                 errorDiv.append(error);\r\n                 \r\n                }else{\r\n                    //registered succesfully -> redirect for login view\r\n                    this.setState({registered: true});\r\n                }\r\n                \r\n              })\r\n              \r\n            .catch((error) => {\r\n                 var error = document.createElement('p');\r\n                 error.style=\"color: #D62222; background: rgba(255,0,0,0.1); display:inline-block; padding:10px; width:80%; border: solid 1px #D62222;\";\r\n                 error.innerHTML=\"Nie można połączyć się z serwerem, spróbuj poźniej!\";\r\n                 var errorDiv = document.getElementsByClassName('errorContainer')[0];\r\n       \r\n                 if(errorDiv.childElementCount!=0)\r\n                    errorDiv.removeChild(errorDiv.lastElementChild);\r\n                 errorDiv.style=\"visibility:visible;\";\r\n                 errorDiv.append(error);\r\n              \r\n        });\r\n    }\r\n\r\n    emailValidation(email){\r\n        var re = /\\S+@\\S+\\.\\S+/;\r\n        return re.test(email);\r\n    }\r\n    strongPassword(password){\r\n        var re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})/;\r\n        return re.test(password)\r\n    }   \r\n    render() {\r\n        //password validation\r\n        let inputStyle = { };\r\n        if(this.state.password!==this.state.repeatedPassword){\r\n            inputStyle={\r\n                'border': 'solid red 1px',\r\n                'background': 'rgba(255,0,0,0.3)'\r\n            }\r\n             this.state.correctRepeatedPassword = false;\r\n\r\n        }else{\r\n            inputStyle={}   \r\n            this.state.correctRepeatedPassword = true; \r\n        }\r\n        let passwordStyle = {};\r\n        //strong password validation\r\n        if(!this.strongPassword(this.state.password)){\r\n            passwordStyle = {\r\n                'border': 'solid red 1px',\r\n                'background': 'rgba(255,0,0,0.3)'\r\n            }\r\n             this.state.correctPassword = false;\r\n        }else{\r\n            passwordStyle={};\r\n            this.state.correctPassword = true;\r\n        }\r\n\r\n        //email validation\r\n        let emailStyle ={};\r\n        if(!this.emailValidation(this.state.mail)){\r\n            emailStyle={\r\n                'border': 'solid red 1px',\r\n                'background': 'rgba(255,0,0,0.3)'\r\n            }\r\n             this.state.correctEmail = false;\r\n        }else{\r\n            emailStyle={};\r\n            this.state.correctEmail =true\r\n\r\n        }\r\n        //checking if all datas are correct\r\n        if(this.state.correctEmail && this.state.correctPassword && this.state.correctRepeatedPassword&& this.state.name!=''){\r\n            this.state.correctData=true;\r\n        }else{\r\n            this.state.correctData=false;\r\n        }\r\n       \r\n        //redirecting to login View\r\n       if (this.state.registered === true) {\r\n          return <Redirect to='/login' />\r\n        }\r\n\r\n\r\n        return (\r\n            <div className=\"app\">\r\n                <Header />\r\n                <h2 className=\"form-title\">Rejestracja</h2>\r\n                <img src={nyanDuck} alt=\"nyan kaczka\" className=\"nyan\" />\r\n                <div className=\"form-container\">\r\n                   \r\n                    <div>\r\n                     <div className='errorContainer'></div>\r\n                        <input type=\"text\" value={this.state.name} onChange={this.handleName} placeholder=\"login\" defaultValue={this.state.name} /><br/>\r\n                        <input style={emailStyle} type=\"text\"  onChange={this.handleEmail} placeholder=\"email\" defaultValue={this.state.mail} /><br/>\r\n                        {!this.state.correctPassword ? <p className='incorrectPassword'>Użyj silnego hasła. Silne hasło zawiera minimum jedną dużą i małą literę, cyfrę oraz znak specialny. Minimalna długość hasła to 8 znaków.</p>:null}\r\n                        <input style={passwordStyle} type=\"password\" value={this.state.password} onChange={this.handlePassword} placeholder=\"hasło\" defaultValue={this.state.password}/><br/>\r\n                        <input style={inputStyle} type=\"password\"  onChange={this.handleRepeatedPassword} placeholder=\"powtórz hasło\" defaultValue={this.state.repeatedPassword}/><br/>\r\n                        {this.state.correctData ? (<input type=\"submit\" value=\"Zarejestruj\" onClick={this.handleSubmit} enabled=\"true\"/>) : (<input type=\"submit\" value=\"Zarejestruj\"  disabled=\"true\"/>)}\r\n                 </div>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n   \r\n}\r\n\r\n\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}